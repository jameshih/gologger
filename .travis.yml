language: go

services:
  - docker

go:
  - master

install:
  - docker --version
  - docker-compose --version 

before_script:
  - docker-compose -f kafka-docker/docker-compose.yml up -d 

script:
  - cd main
  - mkdir logs
  - go build
  - ./main &
  - PID=$!
  - sleep 10
  - kill $PID
  - cd ..
  - cd kafka-consumer
  - ./consumer.sh

after_script:
  - dcoker-compose stop
